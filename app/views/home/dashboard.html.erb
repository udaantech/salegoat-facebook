<script>
$(function(){
	$("a.check_o").on("click",function(){
	start=$(this).attr("data-start");
	end=$(this).attr("data-end");
	grp=$(".ugroups").css("display");
	likes=$(".ulikes").css("display");
	if(grp!='none'){
		$("input[name^='usergroups']").slice(start,end).prop("checked", true);
	} else if(likes!='none') {
		$("input[name^='userlikes']").slice(start,end).prop("checked", true);
	}
	});


	$("a.check_c").on("click",function(){
		var start=prompt("Please enter start value","0");
		var end=prompt("Please enter end value","100");
		grp=$(".ugroups").css("display");
		likes=$(".ulikes").css("display");
		if(grp!='none'){
			check_section=$("input[name^='usergroups']");
		} else if(likes!='none') {
			check_section=$("input[name^='userlikes']");
		}
		check_section.slice(start,end).prop("checked", true);
		l=check_section.slice(start,end).length;
		alert(l+" items selected ("+start+" - "+end+")");
	});
	
	
	
	$("#selectall").click(function(){
	$("input[type='checkbox']").prop("checked", true);
	});
	
	$("#deselectall").click(function(){
	$("input[type='checkbox']").prop("checked", false);
	});
	
	
	
	/*$("#addlink").click(function(){
		$("#linkinfo").toggle();
		$("#picupload").hide();
		});
		$("#addpic").click(function(){
			$("#picupload").toggle();
			$("#linkinfo").hide();
		})*/
});

function fillData() {
	var selected = new Array();
	var product_name =$("#product_name").val();
	var product_desc =$("#product_desc").val();
	var links =$("#link").val();
	
	
	
	
	   $("input[type=checkbox]:checked").each(function() {
       selected.push($(this).val());
		});
		
		if(selected.length==0)
		{
			alert("Please check atleast one checkbox!");
			return false;
		}
		
		else if(product_name=="" || product_name==null) {
			alert("Please fill product name!");
			return false;
			
		}
		
		else if(product_desc=="" || product_desc==null) {
			alert("Please fill product description!");
			return false;
			
		}
		
		else if(links=="" || links==null || links=='http://') {
			alert("Please give a link!");
			return false;
			
		}
		
		
		$.ajax({
			url:"putCheckBox",
			data:{type:selected,productName:product_name,productDesc:product_desc,links:links},
			type:'get',
			success:function(result){
				}
		
		});
		
		
		$(".btn-success").attr("href","/orders?order%5Bamount%5D=20&amp;order%5Bdescription%5D=Post");
		
		
}	
	
</script>
<section class="inner_heading_part">
      
     <h2>Post to Multiple (Groups)</h2>
     
</section>
<div class="container"> 
		
		<div class="row">
			<div class="col-sm-6 col-xs-12">
				
				
				<form class="form-horizontal upload-post" role="form" action="/orders?order%5Bamount%5D=20&amp;order%5Bdescription%5D=Pizza+2" method="post" onsubmit="return fillData()"> 
				
				<div class="form-group">				
					<label for="inputEmail3" class="col-sm-4 control-label">Product</label>					
					<div class="col-sm-8">
						<!-- <input type="text" class="form-control" id="exampleInputPassword1"> -->
						 <textarea class="form-control" rows="3" name="product_name" id="product_name" required></textarea>
					</div>
				  </div>
				  <div class="form-group">
					<label for="inputEmail3" class="col-sm-4 control-label">Description<br/></label>
					<div class="col-sm-8">
					 <textarea class="form-control" rows="3" name="product_desc" id="product_desc" required></textarea>
					</div>
				  </div>
				 <!-- <div class="form-group">
					<div class="col-sm-offset-4 col-sm-8">
						<i class="fa fa-plus-circle"></i><a href="#" id="addlink"> Add link |</a>
						<a href="#" id="addpic"> Add image</a>
					</div>
				  </div> -->
				  
				  
				  <div  id="linkinfo" >
					  <div class="form-group" >
							<label class="col-sm-4 control-label">Link</label>
							<div class="col-sm-8">
							 <input type="text" class="form-control" id="link" name="link" value="http://" />
							 
							</div>
				     </div>	
				     
				      <!--<div class="form-group">		
							<label class="col-sm-4 control-label">Link Title </label>
							<div class="col-sm-8">
							 <input type="text" class="form-control" name="linkname" />
							 </div>
				       </div> -->
				     
				     
				    </div> 
				   
				     <div class="form-group">	  			 
						<div class="col-sm-4"></div>	 
							<div class="col-sm-8">
								<div id="picupload" class="upload-picture" style="display:none;">
									<input name="file" class="form-control" type="file" />
								</div>
							</div>
						</div>	
					
					 <div class="form-group">
					<div class="col-sm-offset-4 col-sm-8">
						<!--
					  <button type="submit" class="btn btn-success" >Post</button> -->
					  
					  
					  <a rel="nofollow" onclick="return fillData()" data-method="post" class="btn btn-success" href="javascript:;">Post</a>
					</div>
				  </div>
				  </div>
				  
				  
			
				</form>
			
			<div class="col-sm-6 col-xs-12">
				
					<div class="form-group">
						<div class="col-sm-12">
							<h4>Select Groups to Post to:</h4>
							<div class="pull-right right_section">
								<a href="#" id="selectall">select all -</a>
								<a href="#" id="deselectall">Deselect all</a>
								<br/>
								<a href="#" data-start="0" data-end="100" class="check_o">Select 0-100 - </a>
								<a href="#" data-start="100" data-end="200" class="check_o">Select 101-200 - </a>
								<a href="#" data-start="200" data-end="300" class="check_o">Select 201-300 - </a>
								<a href="#" data-start="300" data-end="400" class="check_o">Select 301-400 - </a>
								<a href="#" class="check_c">Custom Select</a>
							</div>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<div class="mang_width">
								<div id="ugroups">
									<% if @likes %>
										<% for like in @likes %>
									
									<div class="gdiv">
										<input type="checkbox" id="<%=h like["id"]%>" name="usergroups[<%=h like["id"]%>]" value="<%=h like["id"]%>" /> 
										<label for="<%=h like["id"]%>">
											<span class="gname"><%=h like["name"]%></span>
										</label>
									</div>
									
									<% end %>
									<% end %>
											
								</div>
							</div>
						</div>
					</div>				
				
			</div>
		</div>
    </div> <!-- /container -->
